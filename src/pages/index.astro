---
import BaseLayout from '@/layouts/BaseLayout.astro'

const db = Astro.locals.runtime.env.SITE_DB
const { results } = await db
  .prepare(
    `SELECT * FROM lists
    LEFT JOIN books_lists ON books_lists.list_id=lists.id
    LEFT JOIN books ON books_lists.book_id=books.id
    `,
  )
  .all()
---

<BaseLayout title="Welcome to Astro.">
  <pre>
    {JSON.stringify(results, null, 2)}
  </pre>
</BaseLayout>
